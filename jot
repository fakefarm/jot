#!/usr/bin/env ruby -w

require './string_util'
class Jotter
  
  def initialize
    puts 'Jot a note. Or, [S]earch'.gray
    new 
  end

  def index
    File.open()
  end

  def new
    print '> '.red
    input = gets.chomp
    if input =~ /search/ || input =~ /menu/
      menu
    elsif input == 'quit'
      exit
    else
      create(input)
    end
  end

  def create(input)
    jots = File.join(Dir.home, 'Dropbox', 'jots')
    File.open("#{jots}/#{Time.now.strftime("%F")}.markdown", 'a+') do |jot|
      jot.write "\n"
      jot.write input
    end
    puts 'Saved. Jot another or [M]enu'
    new
  end

  def menu
    puts '[D]elete [E]dit [S]earch'
    input = gets.chomp
    send(input)   
  end
end

Jotter.new
